###
### A complete description of a Prefect Deployment for flow 'extract-load-service-calls'
###
name: extract-load
description: |-
  "
  Extracts CSV as parquets and loads into bigquery dataset

  Parameters
  ----------
  bucket_name: str
      name of bucket in GCS
  dataset_name: str
      name of dataset in bigquery
  year: str
      year for which to extract the service call request records
  overwrite: bool
      if true, overwrite existing parquet/dataset
  test: bool
      if true, load only a small subset onto bigquery
version: cb8da65b9b1a7a4cad5759b8253a4c67
# The work queue that will handle this deployment's runs
work_queue_name: service-calls
work_pool_name: default-agent-pool
tags: []
parameters:
  bucket_name: service-data-lake
  dataset_name: service_calls_models
  year: '2023'
schedule: null
is_schedule_active: true
infra_overrides: {}

###
### DO NOT EDIT BELOW THIS LINE
###
flow_name: extract-load-service-calls
manifest_path: null
infrastructure:
  type: docker-container
  env:
    TF_VAR_region: us-west1
    TF_VAR_bq_dataset: service_calls_models
    TF_VAR_project_id: service-calls-pipeline-382901
    TF_VAR_data_lake_bucket: service-data-lake
  labels: {}
  name: service-call-infra
  command:
  - poetry run
  image: vykuang/service-calls:base
  image_pull_policy: IF_NOT_PRESENT
  image_registry: null
  networks: []
  network_mode: null
  auto_remove: true
  volumes: []
  stream_output: true
  memswap_limit: null
  mem_limit: null
  privileged: false
  _block_document_id: 136ccc0c-4c3d-42a7-b9fa-ebbc06248aa8
  _block_document_name: service-call-infra
  _is_anonymous: false
  block_type_slug: docker-container
  _block_type_slug: docker-container
storage:
  bucket_path: service-data-lake/code
  service_account_info: null
  project: null
  _block_document_id: 02bce16d-2301-49c6-a3e9-e7ecc7da8e75
  _block_document_name: service-code-storage
  _is_anonymous: false
  block_type_slug: gcs
  _block_type_slug: gcs
path: prefect
entrypoint: extract_load.py:extract_load_service_calls
parameter_openapi_schema:
  title: Parameters
  type: object
  properties:
    bucket_name:
      title: bucket_name
      position: 0
      type: string
    dataset_name:
      title: dataset_name
      position: 1
      type: string
    year:
      title: year
      position: 2
      type: string
    overwrite:
      title: overwrite
      default: false
      position: 3
      type: boolean
    test:
      title: test
      default: false
      position: 4
      type: boolean
  required:
  - bucket_name
  - dataset_name
  - year
  definitions: null
timestamp: '2023-04-09T17:20:33.060251+00:00'
